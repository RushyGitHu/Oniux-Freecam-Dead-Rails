
local b64 = [[bG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIHBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgcnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIFN0YXJ0ZXJHdWkgPSBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKQpsb2NhbCBjYW1lcmEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQpsb2NhbCBUd2VlblNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCBDb3JlR3VpID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikKCi0tIFdlbGNvbWUgTWVzc2FnZSB3aXRoIEdyYWRpZW50CmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVdlbGNvbWVOb3RpZmljYXRpb24oKQogICAgU3RhcnRlckd1aTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgIFRpdGxlID0gIldlbGNvbWUgdG8gT25pdXgiLAogICAgICAgIFRleHQgPSAiRGVhZCBSYWlscyB8IENyZWF0ZWQgYnkgTXl0cmlsIiwKICAgICAgICBJY29uID0gInJieGFzc2V0aWQ6Ly82MDMxMjgwODgyIiwgLS0gUmVwbGFjZSB3aXRoIHlvdXIgaWNvbiBJRAogICAgICAgIER1cmF0aW9uID0gNQogICAgfSkKZW5kCgotLSBNb2Rlcm4gR1VJIENyZWF0aW9uCmxvY2FsIFNjcmVlbkd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKU2NyZWVuR3VpLk5hbWUgPSAiT25pdXhHVUkiClNjcmVlbkd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQpTY3JlZW5HdWkuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmcKU2NyZWVuR3VpLlBhcmVudCA9IENvcmVHdWkKCi0tIE1haW4gQ29udGFpbmVyCmxvY2FsIE1haW5GcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpNYWluRnJhbWUuTmFtZSA9ICJNYWluRnJhbWUiCk1haW5GcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDMwMCwgMCwgNDAwKQpNYWluRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTUwLCAwLjUsIC0yMDApCk1haW5GcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzNSkKTWFpbkZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKTWFpbkZyYW1lLkNsaXBzRGVzY2VuZGFudHMgPSB0cnVlCk1haW5GcmFtZS5QYXJlbnQgPSBTY3JlZW5HdWkKCi0tIEFkZCBhZnRlciBNYWluRnJhbWUgY3JlYXRpb24gYnV0IGJlZm9yZSBvdGhlciBlbGVtZW50cwpsb2NhbCBVSVN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQpVSVN0cm9rZS5UaGlja25lc3MgPSAyClVJU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSAtLSBTdGFydGluZyB3aXRoIHJlZApVSVN0cm9rZS5QYXJlbnQgPSBNYWluRnJhbWUKCi0tIFJhaW5ib3cgQ29sb3JzIGZvciBVSQpsb2NhbCBSYWluYm93Q29sb3JzVUkgPSB7CiAgICBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApLCAgICAtLSBSZWQKICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMTI3LCAwKSwgIC0tIE9yYW5nZQogICAgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDApLCAgLS0gWWVsbG93CiAgICBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApLCAgICAtLSBHcmVlbgogICAgQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KSwgICAgLS0gQmx1ZQogICAgQ29sb3IzLmZyb21SR0IoNzUsIDAsIDEzMCksICAgLS0gSW5kaWdvCiAgICBDb2xvcjMuZnJvbVJHQigxNDgsIDAsIDIxMSkgICAtLSBWaW9sZXQKfQoKbG9jYWwgY3VycmVudENvbG9ySW5kZXggPSAxCmxvY2FsIG5leHRDb2xvckluZGV4ID0gMgpsb2NhbCBjb2xvclVwZGF0ZVJhdGUgPSAxICAtLSBNYWRlIGZhc3Rlcgpsb2NhbCBsYXN0Q29sb3JVcGRhdGUgPSB0aWNrKCkKbG9jYWwgdHJhbnNpdGlvblByb2dyZXNzID0gMAoKLS0gRnVuY3Rpb24gdG8gdXBkYXRlIFVJIG91dGxpbmUgY29sb3IKbG9jYWwgZnVuY3Rpb24gVXBkYXRlVUlPdXRsaW5lKCkKICAgIGxvY2FsIGN1cnJlbnRUaW1lID0gdGljaygpCiAgICBsb2NhbCBkZWx0YVRpbWUgPSBjdXJyZW50VGltZSAtIGxhc3RDb2xvclVwZGF0ZQogICAgCiAgICAtLSBVcGRhdGUgdHJhbnNpdGlvbiBwcm9ncmVzcwogICAgdHJhbnNpdGlvblByb2dyZXNzID0gdHJhbnNpdGlvblByb2dyZXNzICsgZGVsdGFUaW1lIC8gY29sb3JVcGRhdGVSYXRlCiAgICAKICAgIC0tIEdldCBjdXJyZW50IGFuZCBuZXh0IGNvbG9ycwogICAgbG9jYWwgY3VycmVudENvbG9yID0gUmFpbmJvd0NvbG9yc1VJW2N1cnJlbnRDb2xvckluZGV4XQogICAgbG9jYWwgbmV4dENvbG9yID0gUmFpbmJvd0NvbG9yc1VJW25leHRDb2xvckluZGV4XQogICAgCiAgICAtLSBMZXJwIGJldHdlZW4gY29sb3JzCiAgICBsb2NhbCBuZXdDb2xvciA9IGN1cnJlbnRDb2xvcjpMZXJwKG5leHRDb2xvciwgdHJhbnNpdGlvblByb2dyZXNzKQogICAgVUlTdHJva2UuQ29sb3IgPSBuZXdDb2xvcgogICAgCiAgICAtLSBDaGVjayBpZiB3ZSBzaG91bGQgbW92ZSB0byBuZXh0IGNvbG9yCiAgICBpZiB0cmFuc2l0aW9uUHJvZ3Jlc3MgPj0gMSB0aGVuCiAgICAgICAgY3VycmVudENvbG9ySW5kZXggPSBuZXh0Q29sb3JJbmRleAogICAgICAgIG5leHRDb2xvckluZGV4ID0gKG5leHRDb2xvckluZGV4ICUgI1JhaW5ib3dDb2xvcnNVSSkgKyAxCiAgICAgICAgdHJhbnNpdGlvblByb2dyZXNzID0gMAogICAgZW5kCiAgICAKICAgIGxhc3RDb2xvclVwZGF0ZSA9IGN1cnJlbnRUaW1lCmVuZAoKLS0gR3JhZGllbnQgQmFja2dyb3VuZApsb2NhbCBVSUdyYWRpZW50ID0gSW5zdGFuY2UubmV3KCJVSUdyYWRpZW50IikKVUlHcmFkaWVudC5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3KHsKICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0NSkpLAogICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDMwKSkKfSkKVUlHcmFkaWVudC5Sb3RhdGlvbiA9IDQ1ClVJR3JhZGllbnQuUGFyZW50ID0gTWFpbkZyYW1lCgotLSBNYWluIENvcm5lcgpsb2NhbCBNYWluQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCk1haW5Db3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpCk1haW5Db3JuZXIuUGFyZW50ID0gTWFpbkZyYW1lCgotLSBUaXRsZSBCYXIgd2l0aCBHcmFkaWVudApsb2NhbCBUaXRsZUJhciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpUaXRsZUJhci5OYW1lID0gIlRpdGxlQmFyIgpUaXRsZUJhci5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKQpUaXRsZUJhci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA1MCkKVGl0bGVCYXIuQm9yZGVyU2l6ZVBpeGVsID0gMApUaXRsZUJhci5QYXJlbnQgPSBNYWluRnJhbWUKCmxvY2FsIFRpdGxlR3JhZGllbnQgPSBJbnN0YW5jZS5uZXcoIlVJR3JhZGllbnQiKQpUaXRsZUdyYWRpZW50LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoewogICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDYwKSksCiAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDUpKQp9KQpUaXRsZUdyYWRpZW50LlJvdGF0aW9uID0gOTAKVGl0bGVHcmFkaWVudC5QYXJlbnQgPSBUaXRsZUJhcgoKLS0gVGl0bGUgQ29ybmVyCmxvY2FsIFRpdGxlQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpClRpdGxlQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEyKQpUaXRsZUNvcm5lci5QYXJlbnQgPSBUaXRsZUJhcgoKLS0gVGl0bGUgVGV4dCB3aXRoIFNoYWRvdwpsb2NhbCBUaXRsZVRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpClRpdGxlVGV4dC5OYW1lID0gIlRpdGxlVGV4dCIKVGl0bGVUZXh0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwMCwgMC41LCAwKSAgLS0gQ2hhbmdlZCBoZWlnaHQgdG8gaGFsZgpUaXRsZVRleHQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUsIDAsIDApClRpdGxlVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpUaXRsZVRleHQuVGV4dCA9ICJPTklVWCB8IERlYWQgUmFpbHMiClRpdGxlVGV4dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKVGl0bGVUZXh0LlRleHRTaXplID0gMjIKVGl0bGVUZXh0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZApUaXRsZVRleHQuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKVGl0bGVUZXh0LlBhcmVudCA9IFRpdGxlQmFyCgotLSBDcmVkaXQgVGV4dApsb2NhbCBDcmVkaXRUZXh0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpDcmVkaXRUZXh0Lk5hbWUgPSAiQ3JlZGl0VGV4dCIKQ3JlZGl0VGV4dC5TaXplID0gVURpbTIubmV3KDEsIC0xMDAsIDAuNSwgMCkKQ3JlZGl0VGV4dC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNSwgMC41LCAwKSAgLS0gUG9zaXRpb24gaXQgYmVsb3cgdGhlIHRpdGxlCkNyZWRpdFRleHQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKQ3JlZGl0VGV4dC5UZXh0ID0gIkJ5IE15dHJpbCIKQ3JlZGl0VGV4dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkgIC0tIFNsaWdodGx5IGRpbW1lciB0aGFuIHRpdGxlCkNyZWRpdFRleHQuVGV4dFNpemUgPSAxNApDcmVkaXRUZXh0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtCkNyZWRpdFRleHQuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKQ3JlZGl0VGV4dC5QYXJlbnQgPSBUaXRsZUJhcgoKLS0gUmVtb3ZlIFN1YlRpdGxlIHNpbmNlIHdlIG1vdmVkIGl0IHRvIHRoZSBtYWluIHRpdGxlCmlmIFN1YlRpdGxlIHRoZW4KICAgIFN1YlRpdGxlOkRlc3Ryb3koKQplbmQKCi0tIENvbnRyb2wgQnV0dG9ucyBDb250YWluZXIKbG9jYWwgQ29udHJvbEJ1dHRvbnMgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKQ29udHJvbEJ1dHRvbnMuTmFtZSA9ICJDb250cm9sQnV0dG9ucyIKQ29udHJvbEJ1dHRvbnMuU2l6ZSA9IFVEaW0yLm5ldygwLCA4MCwgMSwgMCkKQ29udHJvbEJ1dHRvbnMuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTg1LCAwLCAwKQpDb250cm9sQnV0dG9ucy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpDb250cm9sQnV0dG9ucy5QYXJlbnQgPSBUaXRsZUJhcgoKLS0gQ3JlYXRlIENvbnRyb2wgQnV0dG9uIEZ1bmN0aW9uCmxvY2FsIGZ1bmN0aW9uIENyZWF0ZUNvbnRyb2xCdXR0b24obmFtZSwgc3ltYm9sLCBwb3NpdGlvbiwgY29sb3IpCiAgICBsb2NhbCBidXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgYnV0dG9uLk5hbWUgPSBuYW1lCiAgICBidXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMCwgMzApCiAgICBidXR0b24uUG9zaXRpb24gPSBwb3NpdGlvbgogICAgYnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBjb2xvcgogICAgYnV0dG9uLlRleHQgPSBzeW1ib2wKICAgIGJ1dHRvbi5UZXh0U2l6ZSA9IDE4CiAgICBidXR0b24uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBidXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBidXR0b24uUGFyZW50ID0gQ29udHJvbEJ1dHRvbnMKICAgIAogICAgbG9jYWwgYnV0dG9uQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBidXR0b25Db3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikKICAgIGJ1dHRvbkNvcm5lci5QYXJlbnQgPSBidXR0b24KICAgIAogICAgLS0gSG92ZXIgQW5pbWF0aW9uCiAgICBsb2NhbCBvcmlnaW5hbENvbG9yID0gY29sb3IKICAgIGxvY2FsIGhvdmVyQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigKICAgICAgICBtYXRoLmNsYW1wKGNvbG9yLlIgKiAyNTUgKyAyMCwgMCwgMjU1KSAvIDI1NSwKICAgICAgICBtYXRoLmNsYW1wKGNvbG9yLkcgKiAyNTUgKyAyMCwgMCwgMjU1KSAvIDI1NSwKICAgICAgICBtYXRoLmNsYW1wKGNvbG9yLkIgKiAyNTUgKyAyMCwgMCwgMjU1KSAvIDI1NQogICAgKQogICAgCiAgICBidXR0b24uTW91c2VFbnRlcjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGJ1dHRvbiwgVHdlZW5JbmZvLm5ldygwLjIpLCB7CiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBob3ZlckNvbG9yCiAgICAgICAgfSk6UGxheSgpCiAgICBlbmQpCiAgICAKICAgIGJ1dHRvbi5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoYnV0dG9uLCBUd2VlbkluZm8ubmV3KDAuMiksIHsKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IG9yaWdpbmFsQ29sb3IKICAgICAgICB9KTpQbGF5KCkKICAgIGVuZCkKICAgIAogICAgcmV0dXJuIGJ1dHRvbgplbmQKCi0tIENyZWF0ZSBDb250cm9sIEJ1dHRvbnMKbG9jYWwgbWluaW1pemVCdG4gPSBDcmVhdGVDb250cm9sQnV0dG9uKCJNaW5pbWl6ZUJ0biIsICItIiwgVURpbTIubmV3KDAsIDAsIDAuNSwgLTE1KSwgQ29sb3IzLmZyb21SR0IoMjU1LCAxODksIDY4KSkKbG9jYWwgY2xvc2VCdG4gPSBDcmVhdGVDb250cm9sQnV0dG9uKCJDbG9zZUJ0biIsICLDlyIsIFVEaW0yLm5ldygxLCAtMzUsIDAuNSwgLTE1KSwgQ29sb3IzLmZyb21SR0IoMjU1LCA5NSwgOTUpKQoKLS0gQ29udGVudCBDb250YWluZXIKbG9jYWwgQ29udGVudEZyYW1lID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCkNvbnRlbnRGcmFtZS5OYW1lID0gIkNvbnRlbnRGcmFtZSIKQ29udGVudEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAxLCAtNjApCkNvbnRlbnRGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgNTApCkNvbnRlbnRGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpDb250ZW50RnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNApDb250ZW50RnJhbWUuU2Nyb2xsQmFySW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpDb250ZW50RnJhbWUuU2Nyb2xsQmFySW1hZ2VUcmFuc3BhcmVuY3kgPSAwLjUKQ29udGVudEZyYW1lLkF1dG9tYXRpY0NhbnZhc1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQpDb250ZW50RnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQpDb250ZW50RnJhbWUuUGFyZW50ID0gTWFpbkZyYW1lCgotLSBGdW5jdGlvbiB0byB1cGRhdGUgQ29udGVudEZyYW1lIGNhbnZhcyBzaXplCmxvY2FsIGZ1bmN0aW9uIFVwZGF0ZUNvbnRlbnRGcmFtZVNpemUoKQogICAgbG9jYWwgbGFzdENoaWxkID0gQ29udGVudEZyYW1lOkdldENoaWxkcmVuKClbI0NvbnRlbnRGcmFtZTpHZXRDaGlsZHJlbigpXQogICAgaWYgbGFzdENoaWxkIHRoZW4KICAgICAgICBsb2NhbCBzaXplID0gbGFzdENoaWxkLlBvc2l0aW9uLlkuT2Zmc2V0ICsgbGFzdENoaWxkLlNpemUuWS5PZmZzZXQgKyAxMAogICAgICAgIENvbnRlbnRGcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIHNpemUpCiAgICBlbmQKZW5kCgotLSBDcmVhdGUgTW9kZXJuIFN3aXRjaApsb2NhbCBmdW5jdGlvbiBDcmVhdGVNb2Rlcm5Td2l0Y2gobmFtZSwgcG9zaXRpb24pCiAgICBsb2NhbCBzd2l0Y2hDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHN3aXRjaENvbnRhaW5lci5OYW1lID0gbmFtZS4uIkNvbnRhaW5lciIKICAgIHN3aXRjaENvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDUwKQogICAgc3dpdGNoQ29udGFpbmVyLlBvc2l0aW9uID0gcG9zaXRpb24KICAgIHN3aXRjaENvbnRhaW5lci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA2MCkKICAgIHN3aXRjaENvbnRhaW5lci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CiAgICBzd2l0Y2hDb250YWluZXIuUGFyZW50ID0gQ29udGVudEZyYW1lCiAgICAKICAgIGxvY2FsIGNvbnRhaW5lckNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgY29udGFpbmVyQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDgpCiAgICBjb250YWluZXJDb3JuZXIuUGFyZW50ID0gc3dpdGNoQ29udGFpbmVyCiAgICAKICAgIGxvY2FsIGxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgbGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjcsIDAsIDEsIDApCiAgICBsYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNSwgMCwgMCkKICAgIGxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBsYWJlbC5UZXh0ID0gbmFtZQogICAgbGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBsYWJlbC5UZXh0U2l6ZSA9IDE2CiAgICBsYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgbGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgIGxhYmVsLlBhcmVudCA9IHN3aXRjaENvbnRhaW5lcgogICAgCiAgICBsb2NhbCBzd2l0Y2hGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgc3dpdGNoRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgMjYpCiAgICBzd2l0Y2hGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNjUsIDAuNSwgLTEzKQogICAgc3dpdGNoRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDUpCiAgICBzd2l0Y2hGcmFtZS5QYXJlbnQgPSBzd2l0Y2hDb250YWluZXIKICAgIAogICAgbG9jYWwgc3dpdGNoQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBzd2l0Y2hDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCkKICAgIHN3aXRjaENvcm5lci5QYXJlbnQgPSBzd2l0Y2hGcmFtZQogICAgCiAgICBsb2NhbCB0b2dnbGUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHRvZ2dsZS5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgIHRvZ2dsZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzLCAwLjUsIC0xMCkKICAgIHRvZ2dsZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIHRvZ2dsZS5QYXJlbnQgPSBzd2l0Y2hGcmFtZQogICAgCiAgICBsb2NhbCB0b2dnbGVDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIHRvZ2dsZUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLCAwKQogICAgdG9nZ2xlQ29ybmVyLlBhcmVudCA9IHRvZ2dsZQogICAgCiAgICAtLSBTd2l0Y2ggQW5pbWF0aW9uCiAgICBsb2NhbCBlbmFibGVkID0gZmFsc2UKICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVN3aXRjaCgpCiAgICAgICAgbG9jYWwgdG9nZ2xlUG9zID0gZW5hYmxlZCBhbmQgVURpbTIubmV3KDEsIC0yMywgMC41LCAtMTApIG9yIFVEaW0yLm5ldygwLCAzLCAwLjUsIC0xMCkKICAgICAgICBsb2NhbCB0b2dnbGVDb2xvciA9IGVuYWJsZWQgYW5kIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMTAwKSBvciBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIGxvY2FsIHN3aXRjaENvbG9yID0gZW5hYmxlZCBhbmQgQ29sb3IzLmZyb21SR0IoMCwgMjAwLCAxMDApIG9yIENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDUpCiAgICAgICAgCiAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZSh0b2dnbGUsIFR3ZWVuSW5mby5uZXcoMC4yKSwgewogICAgICAgICAgICBQb3NpdGlvbiA9IHRvZ2dsZVBvcywKICAgICAgICAgICAgQmFja2dyb3VuZENvbG9yMyA9IHRvZ2dsZUNvbG9yCiAgICAgICAgfSk6UGxheSgpCiAgICAgICAgCiAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShzd2l0Y2hGcmFtZSwgVHdlZW5JbmZvLm5ldygwLjIpLCB7CiAgICAgICAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBzd2l0Y2hDb2xvcgogICAgICAgIH0pOlBsYXkoKQogICAgZW5kCiAgICAKICAgIHN3aXRjaENvbnRhaW5lci5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yCiAgICAgICAgICAgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICBlbmFibGVkID0gbm90IGVuYWJsZWQKICAgICAgICAgICAgdXBkYXRlU3dpdGNoKCkKICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWQKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgcmV0dXJuIHN3aXRjaENvbnRhaW5lciwgZnVuY3Rpb24oKSByZXR1cm4gZW5hYmxlZCBlbmQKZW5kCgotLSBDcmVhdGUgU3dpdGNoZXMKbG9jYWwgbnBjTG9ja1N3aXRjaCwgZ2V0TnBjTG9ja1N0YXRlID0gQ3JlYXRlTW9kZXJuU3dpdGNoKCJOUEMgTG9jayIsIFVEaW0yLm5ldygwLCAwLCAwLCAxMCkpCmxvY2FsIGVzcFN3aXRjaCwgZ2V0RXNwU3RhdGUgPSBDcmVhdGVNb2Rlcm5Td2l0Y2goIkVTUCIsIFVEaW0yLm5ldygwLCAwLCAwLCA3MCkpCgotLSBBZGQgQ2hhbmdlbG9nIFNlY3Rpb24KbG9jYWwgZnVuY3Rpb24gQ3JlYXRlQ2hhbmdlbG9nU2VjdGlvbigpCiAgICBsb2NhbCBjaGFuZ2Vsb2dDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIGNoYW5nZWxvZ0NvbnRhaW5lci5OYW1lID0gIkNoYW5nZWxvZ0NvbnRhaW5lciIKICAgIGNoYW5nZWxvZ0NvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwMCkgIC0tIEluY3JlYXNlZCBoZWlnaHQgZm9yIGNoYW5nZWxvZwogICAgY2hhbmdlbG9nQ29udGFpbmVyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDEzMCkgIC0tIFBvc2l0aW9uIGJlbG93IHN3aXRjaGVzCiAgICBjaGFuZ2Vsb2dDb250YWluZXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNjApCiAgICBjaGFuZ2Vsb2dDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNQogICAgY2hhbmdlbG9nQ29udGFpbmVyLlBhcmVudCA9IENvbnRlbnRGcmFtZQogICAgCiAgICBsb2NhbCBjb250YWluZXJDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIGNvbnRhaW5lckNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA4KQogICAgY29udGFpbmVyQ29ybmVyLlBhcmVudCA9IGNoYW5nZWxvZ0NvbnRhaW5lcgogICAgCiAgICAtLSBDaGFuZ2Vsb2cgVGl0bGUKICAgIGxvY2FsIHRpdGxlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICB0aXRsZUxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAzMCkKICAgIHRpdGxlTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDUpCiAgICB0aXRsZUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB0aXRsZUxhYmVsLlRleHQgPSAiQ2hhbmdlbG9nIgogICAgdGl0bGVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIHRpdGxlTGFiZWwuVGV4dFNpemUgPSAxOAogICAgdGl0bGVMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIHRpdGxlTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgIHRpdGxlTGFiZWwuUGFyZW50ID0gY2hhbmdlbG9nQ29udGFpbmVyCiAgICAKICAgIC0tIENoYW5nZWxvZyBDb250ZW50CiAgICBsb2NhbCBjb250ZW50TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBjb250ZW50TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjAsIDEsIC00MCkKICAgIGNvbnRlbnRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMzUpCiAgICBjb250ZW50TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGNvbnRlbnRMYWJlbC5UZXh0ID0gW1tWZXJzaW9uIDIuMDoK4oCiIEFkZGVkIEVTUCBmdW5jdGlvbmFsaXR5IChXSVApCuKAoiBJbXByb3ZlZCBVaS9HdWkK4oCiIEFkZGVkIEEgQnlwYXNzIENhbWVyYSBSZXN0cmljdGlvbnMKCkNvbWluZyBTb29uOgrigKIgRnVsbCBFU1Agc3lzdGVtCuKAoiBQbGF5ZXIgRVNQCuKAoiBTZXR0aW5ncyBtZW51XV0KICAgIGNvbnRlbnRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgIGNvbnRlbnRMYWJlbC5UZXh0U2l6ZSA9IDE0CiAgICBjb250ZW50TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0KICAgIGNvbnRlbnRMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgY29udGVudExhYmVsLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgIGNvbnRlbnRMYWJlbC5QYXJlbnQgPSBjaGFuZ2Vsb2dDb250YWluZXIKICAgIAogICAgcmV0dXJuIGNoYW5nZWxvZ0NvbnRhaW5lcgplbmQKCi0tIENyZWF0ZSBDaGFuZ2Vsb2cKbG9jYWwgY2hhbmdlbG9nID0gQ3JlYXRlQ2hhbmdlbG9nU2VjdGlvbigpCgotLSBVcGRhdGUgY2FudmFzIHNpemUgYWZ0ZXIgY3JlYXRpbmcgc3dpdGNoZXMgYW5kIGNoYW5nZWxvZwpVcGRhdGVDb250ZW50RnJhbWVTaXplKCkKCi0tIERyYWdnaW5nIFN5c3RlbQpsb2NhbCBmdW5jdGlvbiBFbmFibGVEcmFnZ2luZyhmcmFtZSwgaGFuZGxlKQogICAgbG9jYWwgZHJhZ2dpbmcgPSBmYWxzZQogICAgbG9jYWwgZHJhZ1N0YXJ0ID0gbmlsCiAgICBsb2NhbCBzdGFydFBvcyA9IG5pbAogICAgbG9jYWwgZHJhZ0lucHV0ID0gbmlsCiAgICAKICAgIGhhbmRsZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yCiAgICAgICAgICAgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICBkcmFnZ2luZyA9IHRydWUKICAgICAgICAgICAgZHJhZ1N0YXJ0ID0gaW5wdXQuUG9zaXRpb24KICAgICAgICAgICAgc3RhcnRQb3MgPSBmcmFtZS5Qb3NpdGlvbgogICAgICAgICAgICAKICAgICAgICAgICAgaW5wdXQuQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuRW5kIHRoZW4KICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBoYW5kbGUuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCBvcgogICAgICAgICAgIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICAgICAgZHJhZ0lucHV0ID0gaW5wdXQKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgVXNlcklucHV0U2VydmljZS5JbnB1dENoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICBpZiBkcmFnZ2luZyBhbmQgaW5wdXQgPT0gZHJhZ0lucHV0IHRoZW4KICAgICAgICAgICAgbG9jYWwgZGVsdGEgPSBpbnB1dC5Qb3NpdGlvbiAtIGRyYWdTdGFydAogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGZyYW1lLCBUd2VlbkluZm8ubmV3KDAuMSksIHsKICAgICAgICAgICAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KAogICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9zLlguU2NhbGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3MuWC5PZmZzZXQgKyBkZWx0YS5YLAogICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9zLlkuU2NhbGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3MuWS5PZmZzZXQgKyBkZWx0YS5ZCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0pOlBsYXkoKQogICAgICAgIGVuZAogICAgZW5kKQplbmQKCi0tIEVuYWJsZSBEcmFnZ2luZwpFbmFibGVEcmFnZ2luZyhNYWluRnJhbWUsIFRpdGxlQmFyKQoKLS0gTWluaW1pemUgQnV0dG9uIEZ1bmN0aW9uYWxpdHkKbG9jYWwgaXNNaW5pbWl6ZWQgPSBmYWxzZQptaW5pbWl6ZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlzTWluaW1pemVkID0gbm90IGlzTWluaW1pemVkCiAgICBsb2NhbCB0YXJnZXRTaXplID0gaXNNaW5pbWl6ZWQgYW5kIFVEaW0yLm5ldygwLCAzMDAsIDAsIDQwKSBvciBVRGltMi5uZXcoMCwgMzAwLCAwLCA0MDApCiAgICAKICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoTWFpbkZyYW1lLCBUd2VlbkluZm8ubmV3KDAuMywgRW51bS5FYXNpbmdTdHlsZS5RdWFkKSwgewogICAgICAgIFNpemUgPSB0YXJnZXRTaXplCiAgICB9KTpQbGF5KCkKZW5kKQoKLS0gU2ltcGxpZmllZCBjbG9zZSBidXR0b24gZnVuY3Rpb25hbGl0eQpjbG9zZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIFNjcmVlbkd1aTpEZXN0cm95KCkKZW5kKQoKLS0gU2hvdyBXZWxjb21lIE1lc3NhZ2UKY3JlYXRlV2VsY29tZU5vdGlmaWNhdGlvbigpCgotLSBOUEMgTG9jayBhbmQgRVNQIENvbmZpZ3VyYXRpb24KbG9jYWwgQ29uZmlnID0gewogICAgTlBDTG9jayA9IHsKICAgICAgICBFbmFibGVkID0gZmFsc2UsCiAgICAgICAgTWF4RGlzdGFuY2UgPSA1MDAwLAogICAgICAgIFVwZGF0ZVJhdGUgPSAwLjEsCiAgICAgICAgTGFzdFVwZGF0ZSA9IDAKICAgIH0sCiAgICBFU1AgPSB7CiAgICAgICAgRW5hYmxlZCA9IGZhbHNlLAogICAgICAgIE1heERpc3RhbmNlID0gMTAwLAogICAgICAgIFVwZGF0ZVJhdGUgPSAwLjAzLAogICAgICAgIExhc3RVcGRhdGUgPSAwLAogICAgICAgIE9iamVjdHMgPSB7fSwKICAgICAgICBDb2xvcnMgPSB7CiAgICAgICAgICAgIEl0ZW1zID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpLCAgLS0gQ3lhbgogICAgICAgICAgICBFbmVtaWVzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApLCAtLSBSZWQKICAgICAgICAgICAgUGFzc2l2ZSA9IENvbG9yMy5mcm9tUkdCKDUwLCAyNTUsIDUwKSAgLS0gR3JlZW4KICAgICAgICB9CiAgICB9Cn0KCi0tIEFkZCBhZnRlciB0aGUgQ29uZmlnIHNlY3Rpb24KbG9jYWwgUmFpbmJvd0NvbG9ycyA9IHsKICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCksICAgIC0tIFJlZAogICAgQ29sb3IzLmZyb21SR0IoMjU1LCAxMjcsIDApLCAgLS0gT3JhbmdlCiAgICBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMCksICAtLSBZZWxsb3cKICAgIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCksICAgIC0tIEdyZWVuCiAgICBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpLCAgICAtLSBCbHVlCiAgICBDb2xvcjMuZnJvbVJHQig3NSwgMCwgMTMwKSwgICAtLSBJbmRpZ28KICAgIENvbG9yMy5mcm9tUkdCKDE0OCwgMCwgMjExKSAgIC0tIFZpb2xldAp9Cgpsb2NhbCBSYWluYm93SW5kZXggPSAxCmxvY2FsIExhc3RDb2xvclVwZGF0ZSA9IDAKbG9jYWwgQ29sb3JVcGRhdGVSYXRlID0gMC4xCgotLSBWYWxpZCBJdGVtcyBhbmQgRW50aXRpZXMgTGlzdHMKbG9jYWwgVmFsaWRJdGVtcyA9IHsKICAgIC0tIFdlYXBvbnMKICAgIFsiRHluYW1pdGUiXSA9IHRydWUsCiAgICBbIlJldm9sdmVyIl0gPSB0cnVlLAogICAgWyJEb3VibGUgQmFycmVsIl0gPSB0cnVlLAogICAgWyJEb3VibGUgQmFycmVsIFNob3RndW4iXSA9IHRydWUsCiAgICBbIlJpZmxlIl0gPSB0cnVlLAogICAgWyJSZXBlYXRlciJdID0gdHJ1ZSwKICAgIFsiQ3Jvc3Nib3ciXSA9IHRydWUsCiAgICBbIk1vbG90b3YiXSA9IHRydWUsCiAgICBbIlZhbXBpcmUgS25pZmUiXSA9IHRydWUsCiAgICBbIlBpc3RvbCJdID0gdHJ1ZSwKICAgIFsiU2hvdGd1biJdID0gdHJ1ZSwKICAgIFsiQm93Il0gPSB0cnVlLAogICAgWyJBcnJvdyJdID0gdHJ1ZSwKICAgIFsiVGhyb3dpbmcgS25pZmUiXSA9IHRydWUsCiAgICBbIktuaWZlIl0gPSB0cnVlLAogICAgWyJNYWNoZXRlIl0gPSB0cnVlLAogICAgWyJBeGUiXSA9IHRydWUsCiAgICBbIlBpY2theGUiXSA9IHRydWUsCiAgICBbIlNob3ZlbCJdID0gdHJ1ZSwKICAgIAogICAgLS0gQXJtb3IgJiBDbG90aGluZwogICAgWyJMZWF0aGVyIEFybW9yIl0gPSB0cnVlLAogICAgWyJJcm9uIEFybW9yIl0gPSB0cnVlLAogICAgWyJTdGVlbCBBcm1vciJdID0gdHJ1ZSwKICAgIFsiR29sZCBBcm1vciJdID0gdHJ1ZSwKICAgIFsiSGVsbWV0Il0gPSB0cnVlLAogICAgWyJWZXN0Il0gPSB0cnVlLAogICAgWyJCb290cyJdID0gdHJ1ZSwKICAgIFsiUGFudHMiXSA9IHRydWUsCiAgICBbIlNoaXJ0Il0gPSB0cnVlLAogICAgWyJIYXQiXSA9IHRydWUsCiAgICBbIk1hc2siXSA9IHRydWUsCiAgICBbIkJhY2twYWNrIl0gPSB0cnVlLAogICAgCiAgICAtLSBSZXNvdXJjZXMgJiBNYXRlcmlhbHMKICAgIFsiQ29hbCJdID0gdHJ1ZSwKICAgIFsiRmlyZSBUb3JjaCJdID0gdHJ1ZSwKICAgIFsiQmFyYmVkIFdpcmUiXSA9IHRydWUsCiAgICBbIkNvcnBzZSJdID0gdHJ1ZSwKICAgIFsiQ2FtZXJhIl0gPSB0cnVlLAogICAgWyJBbW1vIl0gPSB0cnVlLAogICAgWyJXb29kIl0gPSB0cnVlLAogICAgWyJTdG9uZSJdID0gdHJ1ZSwKICAgIFsiTWV0YWwiXSA9IHRydWUsCiAgICBbIklyb24iXSA9IHRydWUsCiAgICBbIlN0ZWVsIl0gPSB0cnVlLAogICAgWyJHdW5wb3dkZXIiXSA9IHRydWUsCiAgICBbIlJvcGUiXSA9IHRydWUsCiAgICBbIkNsb3RoIl0gPSB0cnVlLAogICAgWyJMZWF0aGVyIl0gPSB0cnVlLAogICAgWyJXaXJlIl0gPSB0cnVlLAogICAgWyJTY3JhcCJdID0gdHJ1ZSwKICAgIFsiUGFydHMiXSA9IHRydWUsCiAgICAKICAgIC0tIEhlYWxpbmcgSXRlbXMKICAgIFsiQmFuZGFnZSJdID0gdHJ1ZSwKICAgIFsiRHIgUmljbydzIEN1cmUiXSA9IHRydWUsCiAgICBbIk1lZGtpdCJdID0gdHJ1ZSwKICAgIFsiUGFpbmtpbGxlcnMiXSA9IHRydWUsCiAgICBbIkZpcnN0IEFpZCJdID0gdHJ1ZSwKICAgIFsiTWVkaWNpbmUiXSA9IHRydWUsCiAgICBbIkhlYWx0aCBQYWNrIl0gPSB0cnVlLAogICAgWyJTeXJpbmdlIl0gPSB0cnVlLAogICAgCiAgICAtLSBWYWx1YWJsZXMKICAgIFsiR29sZCBCYXIiXSA9IHRydWUsCiAgICBbIkdvbGQgU3RhdHVlIl0gPSB0cnVlLAogICAgWyJHb2xkIFBhaW50aW5nIl0gPSB0cnVlLAogICAgWyJHb2xkIEN1cCJdID0gdHJ1ZSwKICAgIFsiR29sZCBQbGF0ZSJdID0gdHJ1ZSwKICAgIFsiR29sZCBXYXRjaCJdID0gdHJ1ZSwKICAgIFsiU2lsdmVyIEJhciJdID0gdHJ1ZSwKICAgIFsiU2lsdmVyIFN0YXR1ZSJdID0gdHJ1ZSwKICAgIFsiU2lsdmVyIFBhaW50aW5nIl0gPSB0cnVlLAogICAgWyJTaWx2ZXIgQ3VwIl0gPSB0cnVlLAogICAgWyJTaWx2ZXIgUGxhdGUiXSA9IHRydWUsCiAgICBbIlNpbHZlciBXYXRjaCJdID0gdHJ1ZSwKICAgIFsiRGlhbW9uZCJdID0gdHJ1ZSwKICAgIFsiUnVieSJdID0gdHJ1ZSwKICAgIFsiRW1lcmFsZCJdID0gdHJ1ZSwKICAgIFsiU2FwcGhpcmUiXSA9IHRydWUsCiAgICBbIkpld2VscnkiXSA9IHRydWUsCiAgICBbIk1vbmV5Il0gPSB0cnVlLAogICAgWyJDYXNoIl0gPSB0cnVlLAogICAgWyJDb2lucyJdID0gdHJ1ZQp9Cgpsb2NhbCBWYWxpZEVuZW1pZXMgPSB7CiAgICBbIlpvbWJpZSJdID0gdHJ1ZSwKICAgIFsiUnVubmVyIFpvbWJpZSJdID0gdHJ1ZSwKICAgIFsiQmFua2VyIFpvbWJpZSJdID0gdHJ1ZSwKICAgIFsiWm9tYmllIFNvbGRpZXIiXSA9IHRydWUsCiAgICBbIkxhYiBab21iaWUiXSA9IHRydWUsCiAgICBbIk91dGxhdyJdID0gdHJ1ZSwKICAgIFsiSG9yc2ViYWNrIE91dGxhdyJdID0gdHJ1ZSwKICAgIFsiVmFtcGlyZSJdID0gdHJ1ZSwKICAgIFsiV29sZiJdID0gdHJ1ZSwKICAgIFsiV2VyZXdvbGYiXSA9IHRydWUKfQoKbG9jYWwgVmFsaWRQYXNzaXZlID0gewogICAgWyJIb3JzZSJdID0gdHJ1ZSwKICAgIFsiVW5pY29ybiJdID0gdHJ1ZQp9CgotLSBIZWxwZXIgRnVuY3Rpb25zCmxvY2FsIGZ1bmN0aW9uIElzVmFsaWRPYmplY3Qob2JqKQogICAgLS0gQ2hlY2sgaWYgb2JqZWN0IGV4aXN0cyBhbmQgaXMgaW4gd29ya3NwYWNlCiAgICBpZiBub3Qgb2JqIG9yIG5vdCBvYmouUGFyZW50IHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAgCiAgICAtLSBDaGVjayBpZiBpdCdzIGEgdmFsaWQgaXRlbS93ZWFwb24KICAgIGlmIG9iajpJc0EoIlRvb2wiKSB0aGVuIHJldHVybiB0cnVlIGVuZAogICAgaWYgb2JqOklzQSgiTW9kZWwiKSBhbmQgKG9iajpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikgb3Igb2JqOkZpbmRGaXJzdENoaWxkKCJIaXRib3giKSkgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKICAgIGlmIG9iajpJc0EoIkJhc2VQYXJ0IikgYW5kIG9iai5QYXJlbnQ6SXNBKCJNb2RlbCIpIHRoZW4gcmV0dXJuIHRydWUgZW5kCiAgICAKICAgIHJldHVybiBvYmo6SXNEZXNjZW5kYW50T2Yod29ya3NwYWNlKQplbmQKCmxvY2FsIGZ1bmN0aW9uIEdldE9iamVjdFR5cGUob2JqKQogICAgaWYgbm90IElzVmFsaWRPYmplY3Qob2JqKSB0aGVuIHJldHVybiBuaWwgZW5kCiAgICAKICAgIC0tIEdldCB0aGUgYWN0dWFsIG9iamVjdCBuYW1lIChoYW5kbGUgcGFyZW50IG5hbWUgaWYgaXQgZXhpc3RzKQogICAgbG9jYWwgbmFtZSA9IG9iai5OYW1lCiAgICBpZiBvYmo6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIGFuZCBvYmouUGFyZW50IGFuZCBvYmouUGFyZW50Lk5hbWUgdGhlbgogICAgICAgIG5hbWUgPSBvYmouUGFyZW50Lk5hbWUKICAgIGVuZAogICAgCiAgICAtLSBDb252ZXJ0IG5hbWUgdG8gbG93ZXJjYXNlIGZvciBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nCiAgICBsb2NhbCBsb3dlck5hbWUgPSBzdHJpbmcubG93ZXIobmFtZSkKICAgIAogICAgLS0gQ2hlY2sgZm9yIHdlYXBvbnMgZmlyc3QgKG1vcmUgc3BlY2lmaWMgY2hlY2tzKQogICAgbG9jYWwgd2VhcG9uVHlwZXMgPSB7CiAgICAgICAgIlJpZmxlIiwgIlBpc3RvbCIsICJSZXZvbHZlciIsICJTaG90Z3VuIiwgIkJvdyIsICJDcm9zc2JvdyIsIAogICAgICAgICJLbmlmZSIsICJTd29yZCIsICJBeGUiLCAiUGlja2F4ZSIsICJEeW5hbWl0ZSIsICJNb2xvdG92IgogICAgfQogICAgCiAgICBmb3IgXywgd2VhcG9uVHlwZSBpbiBpcGFpcnMod2VhcG9uVHlwZXMpIGRvCiAgICAgICAgaWYgc3RyaW5nLmZpbmQobG93ZXJOYW1lLCBzdHJpbmcubG93ZXIod2VhcG9uVHlwZSkpIHRoZW4KICAgICAgICAgICAgcmV0dXJuICJJdGVtIiwgd2VhcG9uVHlwZQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIENoZWNrIGZvciBkaXJlY3QgbWF0Y2hlcyBpbiBWYWxpZEl0ZW1zCiAgICBpZiBWYWxpZEl0ZW1zW25hbWVdIHRoZW4gCiAgICAgICAgcmV0dXJuICJJdGVtIiwgbmFtZQogICAgZW5kCiAgICAKICAgIC0tIENoZWNrIGZvciBwYXJ0aWFsIG1hdGNoZXMgaW4gVmFsaWRJdGVtcwogICAgZm9yIGl0ZW1OYW1lLCBfIGluIHBhaXJzKFZhbGlkSXRlbXMpIGRvCiAgICAgICAgbG9jYWwgbG93ZXJJdGVtTmFtZSA9IHN0cmluZy5sb3dlcihpdGVtTmFtZSkKICAgICAgICBpZiBzdHJpbmcuZmluZChsb3dlck5hbWUsIGxvd2VySXRlbU5hbWUpIHRoZW4KICAgICAgICAgICAgcmV0dXJuICJJdGVtIiwgaXRlbU5hbWUKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICAtLSBDaGVjayBmb3IgZW5lbWllcwogICAgaWYgVmFsaWRFbmVtaWVzW25hbWVdIHRoZW4gCiAgICAgICAgcmV0dXJuICJFbmVteSIsIG5hbWUKICAgIGVuZAogICAgZm9yIGVuZW15TmFtZSwgXyBpbiBwYWlycyhWYWxpZEVuZW1pZXMpIGRvCiAgICAgICAgbG9jYWwgbG93ZXJFbmVteU5hbWUgPSBzdHJpbmcubG93ZXIoZW5lbXlOYW1lKQogICAgICAgIGlmIHN0cmluZy5maW5kKGxvd2VyTmFtZSwgbG93ZXJFbmVteU5hbWUpIHRoZW4KICAgICAgICAgICAgcmV0dXJuICJFbmVteSIsIGVuZW15TmFtZQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIENoZWNrIGZvciBwYXNzaXZlIGVudGl0aWVzCiAgICBpZiBWYWxpZFBhc3NpdmVbbmFtZV0gdGhlbiAKICAgICAgICByZXR1cm4gIlBhc3NpdmUiLCBuYW1lCiAgICBlbmQKICAgIGZvciBwYXNzaXZlTmFtZSwgXyBpbiBwYWlycyhWYWxpZFBhc3NpdmUpIGRvCiAgICAgICAgbG9jYWwgbG93ZXJQYXNzaXZlTmFtZSA9IHN0cmluZy5sb3dlcihwYXNzaXZlTmFtZSkKICAgICAgICBpZiBzdHJpbmcuZmluZChsb3dlck5hbWUsIGxvd2VyUGFzc2l2ZU5hbWUpIHRoZW4KICAgICAgICAgICAgcmV0dXJuICJQYXNzaXZlIiwgcGFzc2l2ZU5hbWUKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICAtLSBBZGRpdGlvbmFsIGNoZWNrcyBmb3IgdG9vbHMgYW5kIHNwZWNpZmljIGl0ZW1zCiAgICBpZiBvYmo6SXNBKCJUb29sIikgdGhlbgogICAgICAgIC0tIENoZWNrIGlmIGl0J3MgYSB3ZWFwb24KICAgICAgICBpZiBvYmo6RmluZEZpcnN0Q2hpbGQoIkd1blNjcmlwdCIpIG9yIG9iajpGaW5kRmlyc3RDaGlsZCgiRGFtYWdlIikgdGhlbgogICAgICAgICAgICByZXR1cm4gIkl0ZW0iLCAiV2VhcG9uOiAiIC4uIG5hbWUKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gIkl0ZW0iLCBuYW1lCiAgICBlbmQKICAgIAogICAgLS0gQ2hlY2sgZm9yIHNwZWNpZmljIGl0ZW0gcHJvcGVydGllcwogICAgaWYgb2JqOkZpbmRGaXJzdENoaWxkKCJJdGVtUHJvcGVydGllcyIpIG9yIG9iajpGaW5kRmlyc3RDaGlsZCgiUGlja3VwIikgdGhlbgogICAgICAgIHJldHVybiAiSXRlbSIsIG5hbWUKICAgIGVuZAogICAgCiAgICByZXR1cm4gbmlsLCBuaWwKZW5kCgpsb2NhbCBmdW5jdGlvbiBHZXRDbG9zZXN0TlBDKCkKICAgIGxvY2FsIGNsb3Nlc3QgPSBuaWwKICAgIGxvY2FsIG1pbkRpc3RhbmNlID0gQ29uZmlnLk5QQ0xvY2suTWF4RGlzdGFuY2UKICAgIGxvY2FsIHBsYXllclBvcyA9IHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgCiAgICBpZiBub3QgcGxheWVyUG9zIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIHBsYXllclBvcyA9IHBsYXllclBvcy5Qb3NpdGlvbgogICAgCiAgICBmb3IgXywgb2JqIGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBvYmo6SXNBKCJNb2RlbCIpIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgLS0gU2tpcCBpZiBpdCdzIGEgcGxheWVyCiAgICAgICAgICAgIGxvY2FsIGlzUGxheWVyID0gZmFsc2UKICAgICAgICAgICAgZm9yIF8sIHBsciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBwbHIuQ2hhcmFjdGVyID09IG9iaiB0aGVuCiAgICAgICAgICAgICAgICAgICAgaXNQbGF5ZXIgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCBpc1BsYXllciB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IChvYmouSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHBsYXllclBvcykuTWFnbml0dWRlCiAgICAgICAgICAgICAgICBpZiBkaXN0YW5jZSA8IG1pbkRpc3RhbmNlIHRoZW4KICAgICAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdCA9IG9iagogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHJldHVybiBjbG9zZXN0CmVuZAoKLS0gRVNQIEZ1bmN0aW9ucwpsb2NhbCBmdW5jdGlvbiBDcmVhdGVIaWdobGlnaHQob2JqLCBjb2xvcikKICAgIGxvY2FsIGhpZ2hsaWdodCA9IEluc3RhbmNlLm5ldygiSGlnaGxpZ2h0IikKICAgIGhpZ2hsaWdodC5GaWxsQ29sb3IgPSBjb2xvcgogICAgaGlnaGxpZ2h0Lk91dGxpbmVDb2xvciA9IGNvbG9yCiAgICBoaWdobGlnaHQuRmlsbFRyYW5zcGFyZW5jeSA9IDAuNQogICAgaGlnaGxpZ2h0Lk91dGxpbmVUcmFuc3BhcmVuY3kgPSAwCiAgICBoaWdobGlnaHQuQWRvcm5lZSA9IG9iagogICAgaGlnaGxpZ2h0LlBhcmVudCA9IENvcmVHdWkKICAgIAogICAgLS0gQWRkIHJhaW5ib3cgcHJvcGVydHkKICAgIGhpZ2hsaWdodC5SYWluYm93RW5hYmxlZCA9IHRydWUKICAgIGhpZ2hsaWdodC5DdXJyZW50Q29sb3JJbmRleCA9IDEKICAgIGhpZ2hsaWdodC5MYXN0Q29sb3JVcGRhdGUgPSB0aWNrKCkKICAgIAogICAgcmV0dXJuIGhpZ2hsaWdodAplbmQKCmxvY2FsIGZ1bmN0aW9uIFVwZGF0ZUhpZ2hsaWdodENvbG9yKGhpZ2hsaWdodCkKICAgIGlmIG5vdCBoaWdobGlnaHQuUmFpbmJvd0VuYWJsZWQgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIGxvY2FsIGN1cnJlbnRUaW1lID0gdGljaygpCiAgICBpZiBjdXJyZW50VGltZSAtIGhpZ2hsaWdodC5MYXN0Q29sb3JVcGRhdGUgPCBDb2xvclVwZGF0ZVJhdGUgdGhlbiByZXR1cm4gZW5kCiAgICBoaWdobGlnaHQuTGFzdENvbG9yVXBkYXRlID0gY3VycmVudFRpbWUKICAgIAogICAgLS0gU21vb3RobHkgaW50ZXJwb2xhdGUgYmV0d2VlbiBjdXJyZW50IGFuZCBuZXh0IGNvbG9yCiAgICBsb2NhbCBjdXJyZW50Q29sb3IgPSBSYWluYm93Q29sb3JzW2hpZ2hsaWdodC5DdXJyZW50Q29sb3JJbmRleF0KICAgIGxvY2FsIG5leHRJbmRleCA9IGhpZ2hsaWdodC5DdXJyZW50Q29sb3JJbmRleCAlICNSYWluYm93Q29sb3JzICsgMQogICAgbG9jYWwgbmV4dENvbG9yID0gUmFpbmJvd0NvbG9yc1tuZXh0SW5kZXhdCiAgICAKICAgIC0tIENhbGN1bGF0ZSBpbnRlcnBvbGF0aW9uIGJhc2VkIG9uIHRpbWUKICAgIGxvY2FsIGFscGhhID0gKGN1cnJlbnRUaW1lIC0gaGlnaGxpZ2h0Lkxhc3RDb2xvclVwZGF0ZSkgLyBDb2xvclVwZGF0ZVJhdGUKICAgIGxvY2FsIGxlcnBlZENvbG9yID0gY3VycmVudENvbG9yOkxlcnAobmV4dENvbG9yLCBhbHBoYSkKICAgIAogICAgLS0gVXBkYXRlIGhpZ2hsaWdodCBjb2xvcnMKICAgIGhpZ2hsaWdodC5PdXRsaW5lQ29sb3IgPSBsZXJwZWRDb2xvcgogICAgCiAgICAtLSBNb3ZlIHRvIG5leHQgY29sb3IKICAgIGlmIGFscGhhID49IDEgdGhlbgogICAgICAgIGhpZ2hsaWdodC5DdXJyZW50Q29sb3JJbmRleCA9IG5leHRJbmRleAogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlRVNQTGFiZWwob2JqKQogICAgbG9jYWwgYmlsbGJvYXJkR3VpID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQogICAgYmlsbGJvYXJkR3VpLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkKICAgIGJpbGxib2FyZEd1aS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIsIDApCiAgICBiaWxsYm9hcmRHdWkuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICBiaWxsYm9hcmRHdWkuQWRvcm5lZSA9IG9iagogICAgYmlsbGJvYXJkR3VpLlBhcmVudCA9IENvcmVHdWkKCiAgICBsb2NhbCBuYW1lTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBuYW1lTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjUsIDApCiAgICBuYW1lTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIG5hbWVMYWJlbC5UZXh0ID0gb2JqLk5hbWUKICAgIG5hbWVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIG5hbWVMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAogICAgbmFtZUxhYmVsLlRleHRTaXplID0gMTQKICAgIG5hbWVMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIG5hbWVMYWJlbC5QYXJlbnQgPSBiaWxsYm9hcmRHdWkKCiAgICBsb2NhbCBkaXN0YW5jZUxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgZGlzdGFuY2VMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuNSwgMCkKICAgIGRpc3RhbmNlTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC41LCAwKQogICAgZGlzdGFuY2VMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgZGlzdGFuY2VMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgIGRpc3RhbmNlTGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAKICAgIGRpc3RhbmNlTGFiZWwuVGV4dFNpemUgPSAxMgogICAgZGlzdGFuY2VMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgZGlzdGFuY2VMYWJlbC5QYXJlbnQgPSBiaWxsYm9hcmRHdWkKCiAgICByZXR1cm4gYmlsbGJvYXJkR3VpLCBkaXN0YW5jZUxhYmVsCmVuZAoKbG9jYWwgZnVuY3Rpb24gVXBkYXRlRVNQKCkKICAgIGlmIG5vdCBDb25maWcuRVNQLkVuYWJsZWQgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIGxvY2FsIGN1cnJlbnRUaW1lID0gdGljaygpCiAgICBpZiBjdXJyZW50VGltZSAtIENvbmZpZy5FU1AuTGFzdFVwZGF0ZSA8IENvbmZpZy5FU1AuVXBkYXRlUmF0ZSB0aGVuIHJldHVybiBlbmQKICAgIENvbmZpZy5FU1AuTGFzdFVwZGF0ZSA9IGN1cnJlbnRUaW1lCiAgICAKICAgIGxvY2FsIHBsYXllclBvcyA9IHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgaWYgbm90IHBsYXllclBvcyB0aGVuIHJldHVybiBlbmQKICAgIHBsYXllclBvcyA9IHBsYXllclBvcy5Qb3NpdGlvbgogICAgCiAgICAtLSBDbGVhbiB1cCBpbnZhbGlkIG9iamVjdHMKICAgIGZvciBvYmosIGRhdGEgaW4gcGFpcnMoQ29uZmlnLkVTUC5PYmplY3RzKSBkbwogICAgICAgIGlmIG5vdCBJc1ZhbGlkT2JqZWN0KG9iaikgdGhlbgogICAgICAgICAgICBpZiBkYXRhLmhpZ2hsaWdodCB0aGVuIGRhdGEuaGlnaGxpZ2h0OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgaWYgZGF0YS5iaWxsYm9hcmQgdGhlbiBkYXRhLmJpbGxib2FyZDpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgIENvbmZpZy5FU1AuT2JqZWN0c1tvYmpdID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgLS0gVXBkYXRlIGV4aXN0aW5nIGhpZ2hsaWdodCBjb2xvcnMKICAgIGZvciBfLCBkYXRhIGluIHBhaXJzKENvbmZpZy5FU1AuT2JqZWN0cykgZG8KICAgICAgICBpZiBkYXRhLmhpZ2hsaWdodCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZUhpZ2hsaWdodENvbG9yKGRhdGEuaGlnaGxpZ2h0KQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGFuIG9iamVjdCBzaG91bGQgYmUgaWdub3JlZAogICAgbG9jYWwgZnVuY3Rpb24gc2hvdWxkSWdub3JlT2JqZWN0KG9iaikKICAgICAgICAtLSBJZ25vcmUgcGxheWVyIGNoYXJhY3RlciBhbmQgdGhlaXIgdG9vbHMKICAgICAgICBpZiBvYmo6SXNEZXNjZW5kYW50T2YocGxheWVyLkNoYXJhY3RlcikgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKICAgICAgICBpZiBvYmo6SXNEZXNjZW5kYW50T2YocGxheWVyLkJhY2twYWNrKSB0aGVuIHJldHVybiB0cnVlIGVuZAogICAgICAgIAogICAgICAgIC0tIElnbm9yZSBVSSBlbGVtZW50cyBhbmQgZWZmZWN0cwogICAgICAgIGlmIG9iajpJc0EoIkd1aU9iamVjdCIpIG9yIG9iajpJc0EoIkVmZmVjdCIpIHRoZW4gcmV0dXJuIHRydWUgZW5kCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKICAgIAogICAgLS0gVXBkYXRlIGFuZCBhZGQgbmV3IG9iamVjdHMKICAgIGZvciBfLCBvYmogaW4gaXBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIG5vdCBzaG91bGRJZ25vcmVPYmplY3Qob2JqKSB0aGVuCiAgICAgICAgICAgIC0tIENoZWNrIGZvciB0b29scyBpbiB0aGUgd29ya3NwYWNlCiAgICAgICAgICAgIGlmIG9iajpJc0EoIlRvb2wiKSBvciBvYmo6SXNBKCJNb2RlbCIpIG9yIG9iajpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgb2JqVHlwZSwgYWN0dWFsTmFtZSA9IEdldE9iamVjdFR5cGUob2JqKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBvYmpUeXBlIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCByb290ID0gb2JqOklzQSgiTW9kZWwiKSBhbmQgKG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIG9iajpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikgb3Igb2JqLlByaW1hcnlQYXJ0KSBvciBvYmoKICAgICAgICAgICAgICAgICAgICBpZiByb290IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSAocm9vdC5Qb3NpdGlvbiAtIHBsYXllclBvcykuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0YW5jZSA8PSBDb25maWcuRVNQLk1heERpc3RhbmNlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBDb25maWcuRVNQLk9iamVjdHNbb2JqXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gQ3JlYXRlIG5ldyBFU1AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb2xvciA9IENvbmZpZy5FU1AuQ29sb3JzW29ialR5cGUuLiJzIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBoaWdobGlnaHQgPSBDcmVhdGVIaWdobGlnaHQob2JqLCBjb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBiaWxsYm9hcmQsIGRpc3RhbmNlTGFiZWwgPSBDcmVhdGVFU1BMYWJlbChyb290KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIFVwZGF0ZSB0aGUgbmFtZSBsYWJlbCB0byB1c2UgdGhlIGFjdHVhbCBkZXRlY3RlZCBuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlsbGJvYXJkOkZpbmRGaXJzdENoaWxkKCJUZXh0TGFiZWwiKS5UZXh0ID0gYWN0dWFsTmFtZSBvciBvYmouTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZy5FU1AuT2JqZWN0c1tvYmpdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQgPSBoaWdobGlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxib2FyZCA9IGJpbGxib2FyZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VMYWJlbCA9IGRpc3RhbmNlTGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBvYmpUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gYWN0dWFsTmFtZSBvciBvYmouTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBVcGRhdGUgZGlzdGFuY2UgYW5kIHZpc2liaWxpdHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBDb25maWcuRVNQLk9iamVjdHNbb2JqXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5kaXN0YW5jZUxhYmVsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kaXN0YW5jZUxhYmVsLlRleHQgPSBzdHJpbmcuZm9ybWF0KCJbJXNdICVkIG0iLCBkYXRhLm5hbWUsIG1hdGguZmxvb3IoZGlzdGFuY2UpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuaGlnaGxpZ2h0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5oaWdobGlnaHQuRW5hYmxlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXBkYXRlSGlnaGxpZ2h0Q29sb3IoZGF0YS5oaWdobGlnaHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5iaWxsYm9hcmQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJpbGxib2FyZC5FbmFibGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIEhpZGUgaWYgdG9vIGZhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLkVTUC5PYmplY3RzW29ial0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBDb25maWcuRVNQLk9iamVjdHNbb2JqXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuaGlnaGxpZ2h0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5oaWdobGlnaHQuRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5iaWxsYm9hcmQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJpbGxib2FyZC5FbmFibGVkID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tIE5QQyBMb2NrIEZ1bmN0aW9uCmxvY2FsIGZ1bmN0aW9uIFVwZGF0ZU5QQ0xvY2soKQogICAgaWYgbm90IENvbmZpZy5OUENMb2NrLkVuYWJsZWQgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIGxvY2FsIGN1cnJlbnRUaW1lID0gdGljaygpCiAgICBpZiBjdXJyZW50VGltZSAtIENvbmZpZy5OUENMb2NrLkxhc3RVcGRhdGUgPCBDb25maWcuTlBDTG9jay5VcGRhdGVSYXRlIHRoZW4gcmV0dXJuIGVuZAogICAgQ29uZmlnLk5QQ0xvY2suTGFzdFVwZGF0ZSA9IGN1cnJlbnRUaW1lCiAgICAKICAgIGxvY2FsIHRhcmdldCA9IEdldENsb3Nlc3ROUEMoKQogICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgIGNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gdGFyZ2V0Lkh1bWFub2lkCiAgICBlbHNlCiAgICAgICAgY2FtZXJhLkNhbWVyYVN1YmplY3QgPSBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICBlbmQKZW5kCgotLSBDb25uZWN0IFN3aXRjaCBFdmVudHMKbnBjTG9ja1N3aXRjaC5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgb3IKICAgICAgIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICBDb25maWcuTlBDTG9jay5FbmFibGVkID0gbm90IENvbmZpZy5OUENMb2NrLkVuYWJsZWQKICAgICAgICAKICAgICAgICBpZiBub3QgQ29uZmlnLk5QQ0xvY2suRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmVzcFN3aXRjaC5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgb3IKICAgICAgIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICBDb25maWcuRVNQLkVuYWJsZWQgPSBub3QgQ29uZmlnLkVTUC5FbmFibGVkCiAgICAgICAgCiAgICAgICAgaWYgbm90IENvbmZpZy5FU1AuRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGZvciBfLCBkYXRhIGluIHBhaXJzKENvbmZpZy5FU1AuT2JqZWN0cykgZG8KICAgICAgICAgICAgICAgIGlmIGRhdGEuaGlnaGxpZ2h0IHRoZW4gZGF0YS5oaWdobGlnaHQ6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgaWYgZGF0YS5iaWxsYm9hcmQgdGhlbiBkYXRhLmJpbGxib2FyZDpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBDb25maWcuRVNQLk9iamVjdHMgPSB7fQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFNob3cgc3RhdHVzIG5vdGlmaWNhdGlvbgogICAgICAgIFN0YXJ0ZXJHdWk6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICAgICAgVGl0bGUgPSAiRVNQIFN0YXR1cyIsCiAgICAgICAgICAgIFRleHQgPSBDb25maWcuRVNQLkVuYWJsZWQgYW5kICJFU1AgRW5hYmxlZCIgb3IgIkVTUCBEaXNhYmxlZCIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMgogICAgICAgIH0pCiAgICBlbmQKZW5kKQoKLS0gTWFpbiBVcGRhdGUgTG9vcApydW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBVcGRhdGVOUENMb2NrKCkKICAgIFVwZGF0ZUVTUCgpCiAgICBVcGRhdGVVSU91dGxpbmUoKQplbmQpCgotLSBCeXBhc3MgY2FtZXJhIHJlc3RyaWN0aW9ucwpydW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBwbGF5ZXIuQ2FtZXJhTW9kZSA9IEVudW0uQ2FtZXJhTW9kZS5DbGFzc2ljCiAgICBwbGF5ZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gMTAwMDAKICAgIHBsYXllci5DYW1lcmFNaW5ab29tRGlzdGFuY2UgPSAwCmVuZCkKCi0tIENyZWF0ZSBzdWNjZXNzIG5vdGlmaWNhdGlvbgpTdGFydGVyR3VpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7CiAgICBUaXRsZSA9ICJTY3JpcHQgTG9hZGVkIiwKICAgIFRleHQgPSAiRVNQIElzIFdvcmsgSW4gUHJvZ3Jlc3MiLAogICAgRHVyYXRpb24gPSAzCn0pIA==]]

local function decodeBase64(data)
    local b = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    data = data:gsub("[^" .. b .. "=]", "")
    return (data:gsub(".", function(x)
        if x == "=" then return "" end
        local r, f = "", (b:find(x) - 1)
        for i = 6, 1, -1 do r = r .. (f % 2 ^ i - f % 2 ^ (i - 1) > 0 and "1" or "0") end
        return r
    end):gsub("%d%d%d?%d?%d?%d?%d?%d?", function(x)
        if #x ~= 8 then return "" end
        local c = 0
        for i = 1, 8 do c = c + (x:sub(i, i) == "1" and 2 ^ (8 - i) or 0) end
        return string.char(c)
    end))
end

local scriptCode = decodeBase64(b64)
local func, err = loadstring(scriptCode)
if func then
    func()
else
    warn("Error executing obfuscated script:", err)
end
